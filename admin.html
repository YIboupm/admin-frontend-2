<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>管理后台 - LingualAudio</title>
    <link rel="stylesheet" href="css/admin.css">
    <link rel="stylesheet" href="css/questions.css">
    <link rel="stylesheet" href="css/listening_admin.css">
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&family=Playfair+Display:wght@600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="admin-layout">
        <!-- 侧边栏 -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <svg viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <circle cx="24" cy="24" r="20" stroke="currentColor" stroke-width="2"/>
                        <path d="M16 20C16 20 20 16 24 16C28 16 32 20 32 20" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        <circle cx="18" cy="26" r="2" fill="currentColor"/>
                        <circle cx="30" cy="26" r="2" fill="currentColor"/>
                        <path d="M20 32C20 32 22 34 24 34C26 34 28 32 28 32" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                    <span>LingualAudio</span>
                </div>
            </div>
            
            <nav class="sidebar-nav">
                <div class="nav-section">
                    <div class="nav-section-title">主要功能</div>
                    <a href="#dashboard" class="nav-item active" data-page="dashboard">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="3" y="3" width="7" height="9"/>
                            <rect x="14" y="3" width="7" height="5"/>
                            <rect x="14" y="12" width="7" height="9"/>
                            <rect x="3" y="16" width="7" height="5"/>
                        </svg>
                        <span>仪表盘</span>
                    </a>
                    <a href="#writing" class="nav-item" data-page="writing">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/>
                            <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/>
                        </svg>
                        <span>写作任务</span>
                    </a>
                    <a href="#speaking" class="nav-item" data-page="speaking">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"/>
                            <path d="M19 10v2a7 7 0 0 1-14 0v-2"/>
                            <line x1="12" y1="19" x2="12" y2="23"/>
                            <line x1="8" y1="23" x2="16" y2="23"/>
                        </svg>
                        <span>口语任务</span>
                    </a>
                    <a href="#listening" class="nav-item" data-page="listening">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M12 2C8 2 2 4 2 10c0 7 10 12 10 12s10-5 10-12c0-6-6-8-10-8z"/>
                            <circle cx="12" cy="10" r="3"/>
                        </svg>
                        <span>听力管理</span>
                    </a>
                    <a href="#reading" class="nav-item" data-page="reading">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/>
                            <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/>
                        </svg>
                        <span>阅读材料</span>
                    </a>
                    <a href="#stories" class="nav-item" data-page="stories">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/>
                            <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/>
                        </svg>
                        <span>故事管理</span>
                    </a>
                </div>
                
                <div class="nav-section">
                    <div class="nav-section-title">内容管理</div>
                    <a href="#places" class="nav-item" data-page="places">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/>
                            <circle cx="12" cy="10" r="3"/>
                        </svg>
                        <span>旅游地点</span>
                    </a>
                    <a href="#countries" class="nav-item" data-page="countries">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"/>
                            <line x1="2" y1="12" x2="22" y2="12"/>
                            <path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/>
                        </svg>
                        <span>国家/城市</span>
                    </a>
                </div>
            </nav>
            
            <div class="sidebar-footer">
                <div class="user-info" id="userInfo">
                    <div class="user-avatar">
                        <span id="userInitial">A</span>
                    </div>
                    <div class="user-details">
                        <span class="user-name" id="userName">管理员</span>
                        <span class="user-role">Administrator</span>
                    </div>
                </div>
                <button class="btn-logout" id="logoutBtn" title="退出登录">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/>
                        <polyline points="16 17 21 12 16 7"/>
                        <line x1="21" y1="12" x2="9" y2="12"/>
                    </svg>
                </button>
            </div>
        </aside>

        <!-- 主内容区 -->
        <main class="main-content">
            <!-- 顶部栏 -->
            <header class="top-bar">
                <button class="menu-toggle" id="menuToggle">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="3" y1="12" x2="21" y2="12"/>
                        <line x1="3" y1="6" x2="21" y2="6"/>
                        <line x1="3" y1="18" x2="21" y2="18"/>
                    </svg>
                </button>
                <div class="page-title" id="pageTitle">仪表盘</div>
                <div class="top-bar-actions">
                    <div class="search-box">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="11" cy="11" r="8"/>
                            <line x1="21" y1="21" x2="16.65" y2="16.65"/>
                        </svg>
                        <input type="text" placeholder="搜索..." id="globalSearch">
                    </div>
                </div>
            </header>

            <!-- ============================================
                 内容页面容器 - 各模块通过动态加载填充
                 ============================================ -->
            <div class="content-wrapper" id="contentWrapper">
                <!-- 页面内容会被动态加载到这里 -->
                <div class="page-loading" id="pageLoading">
                    <div class="loading-spinner"></div>
                    <span>加载中...</span>
                </div>
            </div>
        </main>
    </div>

    <!-- ============================================
         公共模态框容器 - 各模块的模态框会被追加到这里
         ============================================ -->
    <div id="modalsContainer">
        <!-- 确认删除模态框（公共） -->
        <div class="modal-overlay hidden" id="confirmDeleteModal">
            <div class="modal modal-sm">
                <div class="modal-header">
                    <h3>确认删除</h3>
                    <button class="modal-close" onclick="closeConfirmDeleteModal()">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="18" y1="6" x2="6" y2="18"/>
                            <line x1="6" y1="6" x2="18" y2="18"/>
                        </svg>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="confirm-message">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"/>
                            <line x1="12" y1="8" x2="12" y2="12"/>
                            <line x1="12" y1="16" x2="12.01" y2="16"/>
                        </svg>
                        <p>您确定要删除此项目吗？此操作无法撤销。</p>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" onclick="closeConfirmDeleteModal()">取消</button>
                    <button type="button" class="btn btn-danger" id="btnConfirmDelete">删除</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast 容器 -->
    <div id="toastContainer" class="toast-container"></div>

    <!-- 核心脚本 -->
    <script src="js/config.js"></script>
    <script src="js/admin.js"></script>
    
    <!-- 功能模块脚本 - 按需加载或全部加载 -->
    <script src="js/writing.js"></script>
    <script src="js/listening.js"></script>
    <script src="js/listening_admin.js"></script>
    <script src="js/listening_tareas.js"></script>
    <script src="js/listening_questions.js"></script>
    <script src="js/speaking.js"></script>
</body>
</html>
